<div class="interactive-scheme flex flex-row gap-4 w-full">
  <div class="scheme">
    <div class="headSimulationArea flex flex-col w-full p-6 gap-2">
      <h2 class="tittle" class="text">Simulation area</h2>
    </div>
    
    
  </div>
  <div class="controls">
    <div class="headControls flex flex-row w-full p-6 gap-2">
      <h2 class="tittle" class="text">Scheme controls</h2>

      <div class="ContButtonMode flex flex-row gap-1 items-center">
        <label class="inline-flex items-center cursor-pointer">
          <input type="checkbox" id="switchInput" class="sr-only peer" />
          <div
            class="relative w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600 dark:peer-checked:bg-blue-400"
          >
          </div>
          <span class="ms-3 text-sm font-medium">Manual data</span>
        </label>
      </div>
    </div>
    <div class="flex flex-col w-full p-6 gap-2">
      <form class="flex flex-col w-full p-0">
        <label class="h-auto w-1/1"
          >Well heigth (m):
          <div class="flex flex-row w-full gap-4">
            <input
              type="range"
              min="0"
              max="20"
              value="0"
              class="accent-blue-400 dinamicInput w-3/4 h-auto cursor-pointer"
            />

            <input
              type="text"
              class="manualInput manualInputs w-1/1 mt-1 h-6 cursor-pointer p-2 hidden"
            />
            <p class="mt-0 mb-0 dinamicInput">0 m</p>
          </div>
        </label>

        <label class="h-auto w-1/1"
          >Well width (m):
          <div class="flex flex-row w-full gap-4">
            <input
              type="range"
              min="0"
              max="20"
              value="0"
              class="accent-blue-400 dinamicInput w-3/4 h-auto cursor-pointer"
            />

            <input
              type="text"
              class="manualInput manualInputs w-1/1 mt-1 h-6 cursor-pointer p-2 hidden"
            />
            <p class="mt-0 mb-0 dinamicInput">0 m</p>
          </div>
        </label>

        <label class="h-auto w-1/1"
          >x coordinate of the base of the well:
          <div class="flex flex-row w-full gap-4">
            <input
              type="range"
              min="0"
              max="20"
              value="0"
              class="accent-blue-400 dinamicInput w-3/4 h-auto cursor-pointer"
            />

            <input
              type="text"
              class="manualInput manualInputs w-1/1 mt-1 h-6 cursor-pointer p-2 hidden"
            />
            <p class="mt-0 mb-0 dinamicInput">0</p>
          </div>
        </label>

        <label class="h-auto w-1/1"
          >y coordinate of the base of the well:
          <div class="flex flex-row w-full gap-4">
            <input
              type="range"
              min="0"
              max="20"
              value="0"
              class="accent-blue-400 dinamicInput w-3/4 h-auto cursor-pointer"
            />

            <input
              type="text"
              class="manualInput manualInputs w-1/1 mt-1 h-6 cursor-pointer p-2 hidden"
            />
            <p class="mt-0 mb-0 dinamicInput">0</p>
          </div>
        </label>

        <label class="h-auto w-1/1"
          >x coordinate of the well exit:
          <div class="flex flex-row w-full gap-4">
            <input
              type="range"
              min="0"
              max="20"
              value="0"
              class="accent-blue-400 dinamicInput w-3/4 h-auto cursor-pointer"
            />

            <input
              type="text"
              class="manualInput manualInputs w-1/1 mt-1 h-6 cursor-pointer p-2 hidden"
            />
            <p class="mt-0 mb-0 dinamicInput">0</p>
          </div>
        </label>
        <br>
        <button
          class="manualInput text-white bg-blue-400 hover:bg-blue-500 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-400 dark:hover:bg-blue-300 dark:focus:ring-blue-300 dark:border-blue-300 cursor-pointer hidden"
          >Confirm values</button
        >
        <button
          type="button"
          id="reset-btn"
          class="text-white bg-gray-800 hover:bg-gray-900 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700 cursor-pointer"
          >Reset values</button
        >
      </form>
    </div>
  </div>
</div>

<script>
  //scrip para el funcionamiento del switch
  const switchInput = document.getElementById(
    "switchInput"
  ) as HTMLInputElement;
  const manualInputs = document.querySelectorAll(".manualInput");
  const dinamicInputs = document.querySelectorAll(".dinamicInput");
  switchInput?.addEventListener("change", () => {
    if (switchInput.checked) {
      manualInputs.forEach((input) => input.classList.remove("hidden"));
      dinamicInputs.forEach((input) => input.classList.add("hidden"));
    } else {
      manualInputs.forEach((input) => input.classList.add("hidden"));
      dinamicInputs.forEach((input) => input.classList.remove("hidden"));
    }
  });

  //Scrip para el funcionamiento del boton reset
  const resetButton = document.getElementById("reset-btn");
  if (resetButton) resetButton.addEventListener("click", resetValues);

  function resetValues() {
    const grupos = document.querySelectorAll("div.flex.flex-row");

    grupos.forEach((grupo) => {
      const input = grupo.querySelector(
        'input[type="range"]'
      ) as HTMLInputElement;
      const p = grupo.querySelector("p");

      if (input && p) {
        input.value = "0";
        const tieneUnidad = p.textContent.trim().endsWith("m");
        p.textContent = tieneUnidad ? "0 m" : "0";
      }
    });
  }

  //Script para el funcionamiento de la actualizacion de los elemento p con el valor del input y respetando si son m
  const grupos = document.querySelectorAll("div.flex.flex-row");

  grupos.forEach((grupo) => {
    const input = grupo.querySelector(
      'input[type="range"]'
    ) as HTMLInputElement;
    const p = grupo.querySelector("p");

    if (input && p) {
      const tieneUnidad = p.textContent.trim().endsWith("m");

      input.addEventListener("input", () => {
        p.textContent = tieneUnidad ? `${input.value} m` : input.value;
      });
    }
  });
</script>

<style>
  .scheme {
    background-color: var(--cardEjercicio);
    width: 55%;
    border: 1px solid var(--titles);
    border-radius: 12px;
  }
  .controls {
    background-color: var(--cardEjercicio);
    width: 45%;
    border: 1px solid var(--titles);
    border-radius: 12px;
  }
  .headSimulationArea{
    border-bottom: 1px solid var(--titles);
    justify-content: space-between;
  }
  .headControls {
    border-bottom: 1px solid var(--titles);
    justify-content: space-between;
  }

  .text {
    margin: 0;
  }

  .tittle {
    font-size: 1.2rem;
    font-weight: 700;
    margin-top: 0;
    margin-bottom: 0;
  }

  .manualInputs {
    background-color: var(--cardEjercicio);

    border: 1px solid var(--titles);
    border-radius: 8px;
  }
</style>

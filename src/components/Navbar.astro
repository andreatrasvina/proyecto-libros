---
import "../styles/global.css";
---

<div id="container">
  <nav class="navbar">
    <div class="contenedor flex">
      <a href="/">
        <img
          src="/logouabcs.png"
          alt="logo uabcs"
          class="w-44 light-mode-logo"
          width="250"
        />
        <img
          src="/logouabcsblanco.png"
          alt="logo uabcs"
          class="w-54 dark-mode-logo"
          width="250"
        />
      </a>

      <ul class="ul flex items-center gap-14 font-lato">
        <li>
          <a
            href="/"
            class="font-regular text-[var(--titles)] hover:text-blue-400 transition-colors duration-300"
            >Inicio Rápido</a
          >
        </li>

        <li>
          <a
            href="/books"
            class="font-regular text-[var(--titles)] hover:text-blue-400 transition-colors duration-300"
            >Libros Interactivos</a
          >
        </li>

        <li>
          <a
            href=""
            class="font-regular text-[var(--titles)] hover:text-blue-400 transition-colors duration-300"
            >Contacto</a
          >
        </li>

        <li class="relative group">
          <a
            href="#"
            class="flex items-center gap-2 font-regular text-[var(--titles)] hover:text-blue-400 transition-colors duration-300 cursor-pointer"
          >
            Español
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </a>

          <ul
            class="absolute left-0 mt-2 w-32 bg-white border border-gray-200 rounded shadow-lg opacity-0 translate-y-2 scale-95 group-hover:opacity-100 group-hover:translate-y-0 group-hover:scale-100 invisible group-hover:visible transition-all duration-300 z-10"
          >
            <li>
              <a href="#" class="block px-4 py-2 hover:bg-gray-100">Español</a>
            </li>
            <li>
              <a href="#" class="block px-4 py-2 hover:bg-gray-100">English</a>
            </li>
            <li>
              <a href="#" class="block px-4 py-2 hover:bg-gray-100">Deutsch</a>
            </li>
          </ul>
        </li>

        <li>
          <button
            id="theme-toggle"
            class="flex items-center justify-center w-10 h-10 rounded-md shadow-lg transition-transform transform hover:scale-110"
            aria-label="Toggle dark mode"
          >
            <svg
              id="theme-icon"
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                class="moon-path"
                d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>

              <path
                class="sun-path hidden"
                d="M12 4V2m0 20v-2m8-8h2M2 12h2m15.364-7.364l1.414-1.414M4.222 19.778l1.414-1.414m0-12.728L4.222 4.222m14.142 14.142l1.414 1.414M12 6a6 6 0 1 1 0 12 6 6 0 0 1 0-12z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                fill="none"></path>
            </svg>
          </button>
        </li>
      </ul>
    </div>
  </nav>
</div>

<script>
  const themeToggle = document.getElementById("theme-toggle");
  const body = document.body;

  // Elementos para alternar el icono
  const sunPath = document.querySelector(".sun-path");
  const moonPath = document.querySelector(".moon-path");

  // Función para actualizar los iconos
  const updateIcon = () => {
    // Si el body contiene la clase dark-mode mostrar el sol
    if (body.classList.contains("dark-mode")) {
      sunPath.classList.remove("hidden");
      moonPath.classList.add("hidden");
    } else {
      // si no, pues muestra la luna
      sunPath.classList.add("hidden");
      moonPath.classList.remove("hidden");
    }
  };

  //Preferencia por localstorage
  const currentTheme = localStorage.getItem("theme");
  if (currentTheme) {
    body.classList.add(currentTheme);
    // Llamar a updateIcon para establecer el icono correcto al cargar
    updateIcon();
  } else {
    // Asegurar que el icono inicial (luna) es correcto si no hay tema guardado
    updateIcon();
  }

  // Agrega el "listener" para el clic en el botón
  themeToggle.addEventListener("click", (e) => {
    e.preventDefault();
    body.classList.toggle("dark-mode");

    if (body.classList.contains("dark-mode")) {
      localStorage.setItem("theme", "dark-mode");
    } else {
      localStorage.removeItem("theme");
    }

    updateIcon();
  });
</script>

<style>
  .navbar {
    background-color: var(--navfooter);
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
    display: flex;
    position: sticky;
    width: 100%;
  }

  .contenedor {
    width: 100%;
    padding: 10px 75px 10px 75px;
  }

  .ul {
    justify-content: flex-end;
    width: 100%;
  }

  #theme-toggle {
    color: var(--titles);
  }

  #theme-toggle:hover {
    color: #60a5fa;
  }
</style>
